"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3671],{23671:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});var r=n(67294),i=n(20057),o=n(35480),a=n(17625),c=n(81498),l=n(98138),u=n(27441),f=n(75398),s=n(85956),m=n(47546);function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var y=(0,o.zo)(l.Z).withConfig({displayName:"StyledForm",componentId:"dumi-theme-antv-c7ef__sc-1e7udwn-0"})([".ant-form-item:last-child{margin-bottom:8px;}"]),p=function(){var t,e,n=(0,s.useIntl)().formatMessage,i=d(l.Z.useForm(),1)[0],o=(0,a.R)(c.BS),h=(0,s.useLocale)().id,p=function(){i.resetFields(),(0,c.y1)()},v=(0,m.P)(),b=v.submitFeedback,g=v.showFeedbackResult;return r.createElement(y,{name:"section-feedback-form",form:i,layout:"vertical",onFinish:function(t){b({comment:t.comment}).then((function(){p(),g(!0)})).catch((function(){g(!1)}))}},r.createElement(l.Z.Item,{name:"comment",label:(t="zh"===h?"「":'"',e="zh"===h?"」":'"',r.createElement("div",null,n({id:"你认为"})," ",r.createElement("b",null,t,o.section,e)," ",n({id:"部分如何改进更好？"})))},r.createElement(u.Z.TextArea,{rows:3})),r.createElement(l.Z.Item,{style:{textAlign:"right"}},r.createElement(f.ZP,{htmlType:"button",type:"text",size:"small",onClick:p,style:{marginRight:8}},n({id:"取消"})),r.createElement(f.ZP,{type:"primary",htmlType:"submit",size:"small"},n({id:"提交"}))))};function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g=o.zo.div.withConfig({displayName:"StyledWrapper",componentId:"dumi-theme-antv-c7ef__sc-vcamqv-0"})(["background-color:#fff;border-radius:12px;box-shadow:0 0.5rem 1.2rem #f0f1f2;transition:height 0.3s ease-in-out;width:262px;position:fixed;z-index:1001;padding:10px 18px;border-radius:8px;transition:top 0.3s ease-in-out,right 0.3s ease-in-out;"]),w=function(t,e){var n=null,r=1/0;return e.forEach((function(e){var i=e.getBoundingClientRect(),o=Math.sqrt(Math.pow(i.left+i.width/2-t.clientX,2)+Math.pow(i.top+i.height/2-t.clientY,2));o<r&&(r=o,n=e)})),n},E=function(){var t=(0,a.R)(c.BS),e=(0,i.TH)();(0,r.useEffect)((function(){var t=new MutationObserver((function(){var t=document.querySelectorAll(".comment-link");if(t&&0!==t.length){var e=function(t){var e=t.target.closest(".comment-link");(0,c.KS)(e.getAttribute("data-feedback-hash"))};return t.forEach((function(t){t.addEventListener("click",e)})),function(){t.forEach((function(t){t.removeEventListener("click",e)}))}}}));return t.observe(document.body,{childList:!0,subtree:!0}),function(){t.disconnect()}}),[]);var n=v((0,r.useState)({top:0,right:12}),2),o=n[0],l=n[1];return(0,r.useEffect)((function(){var e=function(e){var n=e.target.closest(".comment-link");if(t.section&&n){var r=CSS.escape(t.section),i=document.querySelectorAll(".comment-link[data-feedback-hash=".concat(r,"]")),o=w(e,i);if(o){var a=o.getBoundingClientRect(),c=Math.min(Math.max(a.top,0),window.innerHeight-380);l({top:c,right:12})}}};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[t.section]),(0,r.useEffect)((function(){(0,c.y1)()}),[e.pathname]),t.section?r.createElement(g,{style:{top:o.top,right:o.right}},r.createElement(p,null)):null}}}]);