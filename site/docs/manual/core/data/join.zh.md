---
title: join
order: 2
---

## æ¦‚è¿°

`join` çš„åŠŸèƒ½æ˜¯ç”¨äºå°†ä¸¤ä»½æ•°æ®è¿æ¥åœ¨ä¸€èµ·ï¼Œç±»ä¼¼äº SQL ä¸­çš„ `JOIN` æ“ä½œã€‚è¯¥åŠŸèƒ½é€šå¸¸ç”¨äºåˆå¹¶ä¸¤ä¸ªæ•°æ®æºä¸­åŸºäºå…±åŒå­—æ®µçš„æ•°æ®ï¼Œå¯ä»¥æŒ‰æŒ‡å®šæ¡ä»¶å°†ä¸¤ä¸ªæ•°æ®æºä¸­çš„è®°å½•ç»“åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æ•°æ®é›†ã€‚è¿™ä¸ªåŠŸèƒ½å¯¹äºåœ¨å¯è§†åŒ–ä¸­å±•ç¤ºå¤šä¸ªæ•°æ®æºä¹‹é—´çš„å…³è”ä¿¡æ¯éå¸¸æœ‰ç”¨ã€‚è¯¥æ“ä½œåœ¨æ•°æ®é¢„å¤„ç†é˜¶æ®µå®Œæˆï¼Œç”Ÿæˆçš„æ–°å­—æ®µå¯ç›´æ¥ç”¨äºå›¾å½¢ç»˜åˆ¶ã€å­—æ®µæ˜ å°„ã€æ ‡æ³¨ç­‰æ“ä½œã€‚

## é…ç½®é¡¹

| å±æ€§     | æè¿°                                   | ç±»å‹                                                                 | é»˜è®¤å€¼   | å¿…é€‰   |
|----------|----------------------------------------|----------------------------------------------------------------------|----------|--------|
| `join`   | éœ€è¦è¿æ¥çš„æ•°æ®æº                       | `object[]`                                                           | -        | æ˜¯     |
| `on`     | ä¸¤ä¸ªæ•°æ®æºè¿æ¥çš„å­—æ®µ                   | `[string \| ((d: any) => string), string \| ((d: any) => string)]`    | -        | æ˜¯     |
| `select` | ä»è¢«è¿æ¥çš„æ•°æ®æºä¸­é€‰æ‹©è¦æ˜¾ç¤ºçš„å­—æ®µ      | `string[]`                                                           | `[]`     | å¦     |
| `as`     | ä¸º `select` å‡ºæ¥çš„å­—æ®µé‡å‘½å            | `string[]`                                                           | ä¸åšé‡å‘½å | å¦     |
| `unknown`| å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°è¿æ¥çš„æ•°æ®ï¼ŒæŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ | `any`                                                                |  NaN    | å¦     |

### å±æ€§è¯¦ç»†è¯´æ˜

1. **`join`**ï¼šæŒ‡å®šéœ€è¦è¿æ¥çš„ç¬¬äºŒä»½æ•°æ®æºï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„è¿æ¥æ•°æ®ã€‚
2. **`on`**ï¼šå®šä¹‰è¿æ¥æ¡ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå­—æ®µçš„æ•°ç»„ï¼Œæˆ–è€…æ˜¯å¯ä»¥è¿”å›å­—æ®µåçš„å‡½æ•°æ•°ç»„ã€‚ç”¨äºåœ¨ä¸¤ä¸ªæ•°æ®æºä¸­æ ¹æ®è¿™äº›å­—æ®µè¿›è¡ŒåŒ¹é…ã€‚
3. **`select`**ï¼šæŒ‡å®šä»è¢«è¿æ¥çš„æ•°æ®æºä¸­é€‰æ‹©å“ªäº›å­—æ®µã€‚é»˜è®¤ä¸ºç©ºæ•°ç»„ï¼Œè¡¨ç¤ºè¿æ¥åçš„æ•°æ®æºåŒ…å«æ‰€æœ‰å­—æ®µã€‚
4. **`as`**ï¼šä¸º `select` é€‰æ‹©çš„å­—æ®µæŒ‡å®šåˆ«åã€‚å¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ºå­—æ®µåŸåã€‚
5. **`unknown`**ï¼šå½“ä¸¤ä¸ªæ•°æ®æºä¸­æ²¡æœ‰åŒ¹é…çš„æ•°æ®æ—¶ï¼Œä½¿ç”¨æ­¤å€¼ä½œä¸ºé»˜è®¤å€¼ã€‚

> ğŸ“Œ join åœ¨å¤æ‚åœºæ™¯ä¸‹èƒ½æ˜¾è‘—å¢å¼ºæ•°æ®ç»„ç»‡èƒ½åŠ›ï¼Œæ˜¯ç»„åˆå’Œæ¸…æ´—æ•°æ®ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚

## ä½¿ç”¨åœºæ™¯

- **æ•°æ®åˆå¹¶**ï¼šåˆå¹¶å¤šæºæ•°æ®ï¼Œè¡¥å…¨ç¼ºå¤±å­—æ®µã€‚å°†ä¸¤ä¸ªå…·æœ‰ç›¸å…³å­—æ®µçš„æ•°æ®æºåˆå¹¶æˆä¸€ä¸ªæ•°æ®æºï¼Œè¿›è¡Œè¿›ä¸€æ­¥åˆ†ææˆ–å¯è§†åŒ–ã€‚
- **æ•°æ®å¯¹é½**ï¼šæ ¹æ®å…±åŒçš„å­—æ®µå¯¹ä¸¤ä¸ªæ•°æ®é›†è¿›è¡Œå¯¹é½ï¼Œç”Ÿæˆå¯è§†åŒ–æ‰€éœ€çš„ç»“æ„ã€‚
- **æ¡ä»¶é€‰æ‹©**ï¼šå°†ä»£ç ï¼ˆå¦‚ç”¨æˆ· IDã€äº§å“ IDï¼‰æ˜ å°„ä¸ºæè¿°ä¿¡æ¯ã€‚ä»è¢«è¿æ¥çš„æ•°æ®æºä¸­é€‰æ‹©æŒ‡å®šçš„å­—æ®µè¿›è¡Œå±•ç¤ºï¼ŒåŒæ—¶é¿å…å†—ä½™æ•°æ®ã€‚

## ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

#### on å­—æ®µè¯´æ˜
on: ['id', 'code']
// æˆ–ä½¿ç”¨å‡½æ•°æ–¹å¼
on: [(d) => d.id, (d) => d.code]

- å°†ä¸¤ä¸ªæ•°æ®æºæŒ‰å­—æ®µè¿æ¥ï¼Œå¹¶ä»å¤–éƒ¨æ•°æ®ä¸­æå–å­—æ®µåˆå¹¶ï¼š

```ts
const data = [
  { a: 1, b: 2, c: 3 },
  { a: 4, b: 5, c: 6 },
];

const joinData = [
  { c: 1, d: 2, e: 3 },
  { c: 4, d: 5, e: 6 },
];

chart.options({
  data: {
    type: 'inline',
    value: data,
    transform: [
      {
        type: 'join',
        join: joinData,
        on: ['a', 'c'],
        select: ['d', 'e'],
      },
    ],
  },
});
```

- è½¬æ¢ç»“æœä¸ºï¼š
```js
[
  { a: 1, b: 2, c: 3, d: 2, e: 3 },
  { a: 4, b: 5, c: 6, d: 5, e: 6 },
]
```

#### å­—æ®µé‡å‘½å
- ä½¿ç”¨ as ä¸º select å‡ºæ¥çš„å­—æ®µé‡å‘½åï¼š
```ts
chart.options({
  data: {
    type: 'inline',
    value: data,
    transform: [
      {
        type: 'join',
        join: joinData,
        on: ['a', 'c'],
        select: ['d', 'e'],
        as: ['dd', 'ee'],
      },
    ],
  },
});
```
- è½¬æ¢ç»“æœä¸ºï¼š
```js
[
  { a: 1, b: 2, c: 3, dd: 2, ee: 3 },
  { a: 4, b: 5, c: 6, dd: 5, ee: 6 },
]
```
#### è®¾ç½®é»˜è®¤å€¼ unknown

- å½“ä¸¤ä¸ªæ•°æ®æºä¸­æ²¡æœ‰åŒ¹é…çš„æ•°æ®æ—¶ï¼Œä½¿ç”¨ unknown æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ï¼š
```ts
const data = [{ id: 1 }, { id: 2 }];
const joinData = [{ code: 1, label: 'A' }];

chart.options({
  data: {
    type: 'inline',
    value: data,
    transform: [
      {
        type: 'join',
        join: joinData,
        on: ['id', 'code'],
        select: ['label'],
        unknown: 'æœªçŸ¥',
      },
    ],
  },
});
```
- è½¬æ¢ç»“æœä¸ºï¼š
```js
[
  { id: 1, label: 'A' },
  { id: 2, label: 'æœªçŸ¥' },
]
```

#### tips
- join æ˜¯ä¸€ç§ å·¦è¿æ¥ï¼ˆleft joinï¼‰ï¼Œæ„å‘³ç€ä¸»æ•°æ®ä¸€å®šä¿ç•™ã€‚

- select ä¸æŒ‡å®šæ—¶é»˜è®¤ä¸æå–å­—æ®µï¼Œåªç”¨äºåˆ¤æ–­è¿æ¥å…³ç³»ã€‚

- æ¨èæå‰å¯¹ join æ•°æ®åšå»é‡å¤„ç†ï¼Œé¿å…å¤šå¯¹ä¸€è¿æ¥æ—¶çš„æ­§ä¹‰ã€‚

- æ”¯æŒåŠ¨æ€å‡½æ•°æå–è¿æ¥å­—æ®µï¼Œé€‚é…å¤æ‚ç»“æ„ã€‚
