---
title: 卡吉图
order: 25
screenshot: 'https://zos.alipayobjects.com/rmsportal/GYxDnAkxCMrLfpB.png'
category: ['trend', 'time']
similar: ['line', 'area', ' k-chart']
---

<img alt="kagi" src="https://zos.alipayobjects.com/rmsportal/GYxDnAkxCMrLfpB.png" width=600/>

## 卡吉图的简介

卡吉图大约发明于 19 世纪 70 年代日本股票市场开始交易的时候。在美国，史蒂文·尼森出版《烛形图之外》后，卡吉图分析法随之流行。由于能够清晰、有效地显示价格走势的路径，卡吉图是投资者用于对股票做出更好决策的图表之一。

卡吉图是一系列由短水平线连接的垂直线，水平线起连接作用，垂直线的厚度和方向取决于价格运动。垂直线方向向上代表价格上升，方向向下代表价格下降，当价格运动方向反转超过阈值时绘制一条新的垂直线，在转折处用水平线相连。当价格上升超过前一个高点转折时采用粗线绘制，称为阳线，当价格下降低于前一个低点转折时采用细线绘制，称为阴线。

**卡吉图的特点：**

- 卡吉图模拟了证券的供给与需求力量的关系，非常适用于股票短线操作
- 卡吉图通过阈值标记逆转，交易者可以过滤掉日常价格波动，只关注价格的显著变化
- 卡吉图独立于时间

:::warning{title=注意}
卡吉图绘制的折线是经过卡吉图算法计算之后的，与原数据曲线有区别
:::

**英文名**：Kagi Chart

## 卡吉图的构成

<img alt="kagi-structure" src="https://zos.alipayobjects.com/rmsportal/dIkzWxciUcEiiFn.jpg" width=400/>

| 图表类型       | 卡吉图                                                       |
| -------------- | ------------------------------------------------------------ |
| 适合的数据     | 一个分类数据字段，一个连续字段                               |
| 功能           | 观察数据变化**趋势**                                         |
| 数据与图形映射 | 转折点的时间分类（自动计算）映射到横轴，转折点的值映射到纵轴 |
| 适合的数据条数 | 大于 10 条                                                   |

**构成要素：**

- **阳线**：价格上升超过前一个高点时的粗线，通常用较粗的线条表示
- **阴线**：价格下降低于前一个低点时的细线，通常用较细的线条表示
- **转折点**：价格运动方向发生逆转的关键点位
- **连接线**：连接垂直线段的水平线，标识转向位置

## 卡吉图的应用场景

### 适合的场景

**场景 1：展示价格或股票变化走势**

卡吉图最适合用于展示金融市场中股票、期货、外汇等价格变化的趋势分析。通过过滤掉日常的小幅波动，突出显示价格的重要转折点，帮助投资者识别趋势的变化。

**场景 2：技术分析和趋势判断**

卡吉图在技术分析中特别有用，因为它能够：

- 过滤市场噪音，专注于重要的价格变动
- 清晰显示支撑位和阻力位
- 帮助识别趋势的延续和反转信号

### 不适合的场景

**场景 1：对时间敏感的数据**

卡吉图与时间无关，只表示数据上升下降的走势，无法体现数据在时间上的一些特性，例如周期等。特别是当数据对时间敏感时不推荐使用卡吉图。

例如网站访问量数据通常具有明显的时间周期性（工作日 vs 周末，白天 vs 夜晚），使用卡吉图会丢失这些重要的时间特征信息。对于此类数据，推荐使用[折线图](/charts/line)或[面积图](/charts/area)。

**场景 2：多组数据对比**

卡吉图的横坐标具有特殊性（转折点时间），无法在同一个横轴上绘制多组卡吉图进行对比分析。如需对比多个数据系列，建议使用[多系列折线图](/charts/line)。

## 卡吉图与其他图表的对比

### 卡吉图与 K 线图

| 特征     | 卡吉图                     | K 线图                              |
| -------- | -------------------------- | ----------------------------------- |
| 时间依赖 | 独立于时间，仅表现数据走势 | 与时间相关，每个时间段对应一个 K 线 |
| 数据展示 | 过滤小幅波动，突出重要转折 | 展示指定时间段内的开高低收价格      |
| 分析重点 | 趋势方向和转折点           | 时间段内的价格波动和成交量          |
| 适用场景 | 中长期趋势分析             | 短期交易和时间敏感分析              |

### 卡吉图与折线图

| 特征     | 卡吉图                             | 折线图                   |
| -------- | ---------------------------------- | ------------------------ |
| 数据处理 | 经过算法计算的转折点数据           | 严格按照原数据的坐标绘制 |
| 坐标轴   | 横坐标为计算得出的转折点           | 横纵坐标都对应原始数据   |
| 线条含义 | 颜色和粗细代表特定含义（阳线阴线） | 通常只表示数据连接关系   |
| 多系列   | 无法绘制多组数据                   | 可以绘制多组数据进行对比 |
| 噪音过滤 | 自动过滤小幅波动                   | 显示所有数据波动         |

## 卡吉图的扩展

### 不同阈值设置

卡吉图的核心参数是**逆转阈值**，不同的阈值设置会产生不同的效果：

- **较小阈值**：更敏感，会捕捉到更多的价格转折，但可能包含较多噪音
- **较大阈值**：过滤更多噪音，只显示重要的趋势变化，但可能错过一些转折信号

### 时间加权卡吉图

传统卡吉图完全忽略时间因素，而时间加权卡吉图在计算转折点时会考虑时间间隔，使图表在保持卡吉图特色的同时，部分保留时间信息。

## 实现说明

:::info{title=开发说明}
G2 目前暂未提供内置的卡吉图标记，但可以通过以下方式实现：

1. **数据预处理**：使用卡吉图算法对原始数据进行转换，计算出转折点数据
2. **自定义标记**：结合 `path` 标记和自定义形状实现卡吉图的视觉效果
3. **算法实现**：需要实现卡吉图的核心算法，包括阈值判断、转折点计算等

详细的实现方式可以参考 [自定义标记](/manual/core/mark/overview#示例) 文档。
:::

## 相似图表

<code src="./demos/list-card.tsx"></code>

## 分类

<code src="./demos/list-category.tsx"></code>
